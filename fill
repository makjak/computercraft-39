function findMats()
	for i=2,16 do
		if turtle.getItemCount(i) > 0 then
			turtle.select(i)
			return true
		end
	end
	return false
end

function fillWalls()
	for i=1,3 do
		while turtle.attack() do
		end
		if findMats() then
			turtle.place()
		end
		t.turnRight()
	end
	while turtle.attack() do
	end
	if findMats() then
		turtle.place()
	end
end

local depth = 0

while not turtle.detectDown() do
	t.downAttack()
	depth = depth + 1
end

for i=1,depth do
	if findMats() then
		turtle.placeDown()
		fillWalls()
	end
	t.upAttack()
end
if findMats() then
	turtle.placeDown()
	fillWalls()
end

t.up()
t.up()