function findMats()
	for i=3,16 do
		if turtle.getItemCount(i) > 0 then
			t.select(i)
			return true
		end
	end
	return false
end

function findAndPlace()
	if findMats() then
		while not t.place() and not t.detect() do
			t.attack()
			os.sleep(0.5)
		end
		return true
	end
	return false
end

function fillWalls()
	for i=1,3 do
		findAndPlace()
		t.turnRight()
	end
	findAndPlace()
end

local depth = 0

t.digDown()


while not t.detectDown() do
	t.downDigAttack()
	depth = depth + 1
	t.digDown()
end

for i=1,depth-1 do
	if findMats() then
		t.placeDown()
		fillWalls()
	end
	t.upDigAttack()
end
if findMats() then
	t.placeDown()
	fillWalls()
end

t.up()
t.placeDown(2)
