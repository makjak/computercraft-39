function findMats()
	for i=2,16 do
		if turtle.getItemCount(i) > 0 then
			t.select(i)
			return true
		end
	end
	return false
end

function fillWalls()
	for i=1,3 do
		while t.attack() do
		end
		if findMats() then
			t.place()
		end
		t.turnRight()
	end
	while t.attack() do
	end
	if findMats() then
		t.place()
	end
end

local depth = 0

while not t.detectDown() do
	t.downAttack()
	depth = depth + 1
end

for i=1,depth do
	if findMats() then
		t.placeDown()
		fillWalls()
	end
	t.upAttack()
end
if findMats() then
	t.placeDown()
	fillWalls()
end

t.up()
t.up()